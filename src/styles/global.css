@import 'tailwindcss';

@custom-variant dark (&:where([data-theme=dark], [data-theme=dark] *));

@theme inline {
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-ring: var(--ring);
}

/* Geist Mono for code blocks - always consistent */
@font-face {
  font-family: 'Geist Mono';
  src: url('/fonts/geist/geist-mono.woff2') format('woff2-variations');
  font-weight: 100 900;
  font-style: normal;
  font-display: optional;
}

:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);

  /* Responsive breakpoints */
  --breakpoint-mobile: 768px;
  --breakpoint-tablet: 1024px;
  --breakpoint-desktop: 1400px;

  /* Container max-widths - simplified */
  --container-max-width: 1200px;
}

[data-theme='dark'] {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --ring: oklch(0.556 0 0);

  /* Inherit responsive and spacing variables from :root */
}

@layer base {
  /* Performance optimizations for smooth scrolling */
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    /* GPU acceleration for smooth scrolling */
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    @apply border-border outline-ring/50 tracking-tight;
  }

  /* Optimize images and media for performance */
  img,
  video,
  iframe {
    content-visibility: auto;
  }
}

/* Simplified Container System */
@layer components {
  .container-responsive,
  .container-reading,
  .container-wide,
  .container-fluid {
    width: 100%;
    max-width: var(--container-max-width);
    margin-left: auto;
    margin-right: auto;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }

  @media (max-width: 767px) {
    .container-responsive,
    .container-reading,
    .container-wide,
    .container-fluid {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }

  /* Mobile-specific layout utilities */
  @media (max-width: 767px) {
    /* Mobile-only container classes */
    .mobile-container {
      width: 90vw;
      max-width: calc(100vw - 32px);
      margin-left: auto;
      margin-right: auto;
      padding-left: 16px;
      padding-right: 16px;
    }

    .mobile-container-tight {
      width: 95vw;
      max-width: calc(100vw - 20px);
      margin-left: auto;
      margin-right: auto;
      padding-left: 10px;
      padding-right: 10px;
    }

    .mobile-container-loose {
      width: 85vw;
      max-width: calc(100vw - 48px);
      margin-left: auto;
      margin-right: auto;
      padding-left: 24px;
      padding-right: 24px;
    }

    .mobile-full-width {
      width: 100vw;
      margin-left: calc(-50vw + 50%);
      margin-right: calc(-50vw + 50%);
      padding-left: 16px;
      padding-right: 16px;
    }

    .mobile-reading {
      width: 90vw;
      max-width: calc(100vw - 32px);
      margin-left: auto;
      margin-right: auto;
      padding-left: 20px;
      padding-right: 20px;
    }

    .mobile-content-width {
      width: 100%;
      max-width: none;
      padding-left: 16px;
      padding-right: 16px;
    }
  }

  /* Tablet-specific layout utilities */
  @media (min-width: 768px) and (max-width: 1023px) {
    .tablet-optimized {
      width: 85%;
      margin-left: auto;
      margin-right: auto;
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }

    .tablet-reading {
      width: 80%;
      margin-left: auto;
      margin-right: auto;
      padding-left: 2rem;
      padding-right: 2rem;
    }
  }

  /* Responsive visibility utilities */
  .mobile-only {
    display: block;
  }

  .tablet-only {
    display: none;
  }

  .desktop-only {
    display: none;
  }

  .mobile-hidden {
    display: none;
  }

  .tablet-hidden {
    display: block;
  }

  .desktop-hidden {
    display: block;
  }

  @media (min-width: 768px) and (max-width: 1023px) {
    .mobile-only {
      display: none;
    }

    .tablet-only {
      display: block;
    }

    .desktop-only {
      display: none;
    }

    .mobile-hidden {
      display: block;
    }

    .tablet-hidden {
      display: none;
    }

    .desktop-hidden {
      display: block;
    }
  }

  @media (min-width: 1024px) {
    .mobile-only {
      display: none;
    }

    .tablet-only {
      display: none;
    }

    .desktop-only {
      display: block;
    }

    .mobile-hidden {
      display: block;
    }

    .tablet-hidden {
      display: block;
    }

    .desktop-hidden {
      display: none;
    }
  }

  /* Mobile-optimized spacing utilities */
  @media (max-width: 767px) {
    .mobile-spacing-xs {
      margin: 0.25rem;
      padding: 0.25rem;
    }

    .mobile-spacing-sm {
      margin: 0.5rem;
      padding: 0.5rem;
    }

    .mobile-spacing-md {
      margin: 0.75rem;
      padding: 0.75rem;
    }

    .mobile-spacing-lg {
      margin: 1rem;
      padding: 1rem;
    }

    .mobile-spacing-xl {
      margin: 1.5rem;
      padding: 1.5rem;
    }

    /* Mobile-specific margin utilities */
    .mobile-mx-auto {
      margin-left: auto;
      margin-right: auto;
    }

    .mobile-my-0 {
      margin-top: 0;
      margin-bottom: 0;
    }

    .mobile-my-2 {
      margin-top: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .mobile-my-4 {
      margin-top: 1rem;
      margin-bottom: 1rem;
    }

    .mobile-my-6 {
      margin-top: 1.5rem;
      margin-bottom: 1.5rem;
    }

    /* Mobile-specific padding utilities */
    .mobile-px-2 {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }

    .mobile-px-4 {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    .mobile-px-6 {
      padding-left: 1.5rem;
      padding-right: 1.5rem;
    }

    .mobile-py-2 {
      padding-top: 0.5rem;
      padding-bottom: 0.5rem;
    }

    .mobile-py-4 {
      padding-top: 1rem;
      padding-bottom: 1rem;
    }

    .mobile-py-6 {
      padding-top: 1.5rem;
      padding-bottom: 1.5rem;
    }

    /* Mobile gap utilities for flexbox/grid */
    .mobile-gap-2 {
      gap: 0.5rem;
    }

    .mobile-gap-4 {
      gap: 1rem;
    }

    .mobile-gap-6 {
      gap: 1.5rem;
    }

    /* Mobile text spacing */
    .mobile-text-tight {
      line-height: 1.25;
      letter-spacing: -0.025em;
    }

    .mobile-text-normal {
      line-height: 1.5;
      letter-spacing: 0;
    }

    .mobile-text-loose {
      line-height: 1.75;
      letter-spacing: 0.025em;
    }
  }

  /* Mobile touch target and navigation optimizations */
  @media (max-width: 767px) {
    /* Enhanced button touch targets for mobile */
    [data-slot='button'] {
      min-height: 44px; /* iOS recommended minimum */
      min-width: 44px;
      padding: 0.75rem 1rem;
      font-size: 1rem;
    }

    /* Chapter navigation mobile optimizations */
    .chapter-navigation {
      gap: 0.75rem;
      padding: 1rem 0;
    }

    .chapter-navigation [data-slot='button'] {
      min-height: 56px; /* Larger touch targets for navigation */
      padding: 1rem;
      font-size: 0.875rem;
    }

    /* Mobile navigation grid adjustments */
    .mobile-nav-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.75rem;
    }

    .mobile-nav-grid.three-column {
      grid-template-columns: 1fr 1fr 1fr;
      gap: 0.5rem;
    }

    .mobile-nav-grid.three-column [data-slot='button'] {
      min-height: 48px;
      padding: 0.5rem;
      font-size: 0.75rem;
    }

    /* Mobile icon sizing */
    .mobile-nav-grid [data-slot='button'] svg {
      width: 1rem;
      height: 1rem;
    }

    /* Mobile text adjustments */
    .mobile-nav-grid .text-xs {
      font-size: 0.625rem;
    }

    .mobile-nav-grid .text-sm {
      font-size: 0.75rem;
      line-height: 1.2;
    }

    /* Ensure touch targets don't overlap */
    .mobile-touch-spacing > * + * {
      margin-top: 0.5rem;
    }

    /* Mobile-specific hover states (remove hover effects) */
    .mobile-no-hover:hover {
      background-color: inherit;
      transform: none;
    }

    /* Mobile focus states for accessibility */
    .mobile-focus-visible:focus-visible {
      outline: 2px solid hsl(var(--ring));
      outline-offset: 2px;
      border-radius: 0.375rem;
    }

    /* Mobile layout flex utilities */
    .mobile-flex-col {
      display: flex;
      flex-direction: column;
    }

    .mobile-flex-row {
      display: flex;
      flex-direction: row;
    }

    .mobile-flex-wrap {
      flex-wrap: wrap;
    }

    .mobile-flex-nowrap {
      flex-wrap: nowrap;
    }

    .mobile-justify-center {
      justify-content: center;
    }

    .mobile-justify-between {
      justify-content: space-between;
    }

    .mobile-items-center {
      align-items: center;
    }

    .mobile-items-start {
      align-items: flex-start;
    }

    /* Mobile width utilities */
    .mobile-w-full {
      width: 100%;
    }

    .mobile-w-auto {
      width: auto;
    }

    .mobile-w-fit {
      width: fit-content;
    }

    /* Mobile height utilities */
    .mobile-h-auto {
      height: auto;
    }

    .mobile-min-h-screen {
      min-height: 100vh;
    }

    .mobile-min-h-touch {
      min-height: 44px; /* iOS minimum touch target */
    }
  }
}